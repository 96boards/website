---
title: "96boards: Autoware everywhere | Autoware.Auto and Dragonboard-845c"
author: Servando German Serrano
date: 2020-01-27 01:00:00+00:00
image:
    featured: true
    path: /assets/images/blog/awf_db845.png
    name: awf_db845.png
categories: blog
series: "96boards: Autoware everywhere"
tags: 64-bit, 96Boards, aarch64, ARM, ARMv8, Consumer Edition, dragonboard-845c, rb3, Linaro, Linux, arm64, real time, ROS2, Autoware
---

# Introduction

In our previous [entry](https://www.96boards.org/blog/autoware.ai_rb3/) we showed how to the Autoware.AI running on the [Qualcomm® Robotics (RB3) Dragonboard-845c Development Platform.](https://www.96boards.org/product/rb3-platform/). In this post we will look at Autoware.Auto and how to bridge Autoware.AI and Autoware.Auto in the same way as we did for the Hikey970.


Following our previous entries of the "96boards: Autoware everywhere" blog series where we focused on the Hikey970 we now move on to a different board, the [Qualcomm® Robotics (RB3) Dragonboard-845c Development Platform.](https://www.96boards.org/product/rb3-platform/)

As we did for the Hikey970 we will show how to run different subcomponents of Autoware on the RB3 platform. The post is organized as follows:
- [Requirements](#requirements)
- [Getting the Docker images](#getting-the-docker-images)
- [Getting the demo data](#getting-the-demo-data)
- [Running the demos](#running-the-demos)
  - [.Auto 3D Perception demo](#auto-3d-perception-demo)
  - [.AI and .Auto bridge](#ai-and-auto-bridge)

***
## Requirements
The steps outlined in this blog posts build up on our previous posts and as such you need to:
- Have your RB3 board running with Debian Buster as outlined [here](https://www.96boards.org/product/rb3-platform/) and with [Docker installed.](https://www.96boards.org/blog/db845-ros2/#installing-docker)
- Be familiar with the work that we conducted previously within the "Autoware everywhere" series on [Autoware.AI](https://www.96boards.org/blog/autoware.ai_hikey970/), [Autoware.Auto](https://www.96boards.org/blog/autoware.auto_hikey970/) and [how to bridge both.](https://www.96boards.org/blog/autoware_bridge_hikey970/)

In addition, if you plan on developing real-time applications in the future your board should be running a RT-enabled kernel as we outlined [here](https://www.96boards.org/blog/db845-rt/).

## Getting the Docker images
We need to get the following Docker images:
```
$ docker pull 96boards/ros:ros1_bridge
$ docker pull 96boards/autoware:auto_20200121
```

## Getting the demo data
In addition to the Docker images we need to get the demo data for [Autoware.AI's rosbag demo](https://gitlab.com/autowarefoundation/autoware.ai/autoware/wikis/ROSBAG-Demo) and the [Autoware.Auto 3D Perception Stack demo](https://autowarefoundation.gitlab.io/autoware.auto/AutowareAuto/perception-stack.html). To do so:
- Create a `shared_dir` folder that will be mounted as a volume inside the docker container:
```
$ mkdir ~/shared_dir
```
we will use this folder to store the demo data.
- Download the demo data:
```
$ cd ~/shared_dir
$ wget http://people.linaro.org/~servando.german.serrano/autoware/autoware.auto_get_demo_data
$ chmod +x autoware.auto_get_demo_data
$ ./autoware.auto_get_demo_data
```

## Running the demos

We are now set to start with the different demos. Let's find out how far we can push the RB3 board.

### .Auto 3D Perception demo

To run the Autoware.Auto 3D Perception Stack demo we will roughly follow the steps [here](https://autowarefoundation.gitlab.io/autoware.auto/AutowareAuto/perception-stack.html) but adapted to our setup.

In the laptop we get the config files and open 2 terminals to run 2 instances of `rviz2` as:
```
$ wget https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/raw/master/src/tools/autoware_auto_examples/rviz2/autoware.rviz
$ wget https://gitlab.com/autowarefoundation/autoware.auto/AutowareAuto/raw/master/src/tools/autoware_auto_examples/rviz2/autoware_voxel.rviz
```
- _Terminal 1_:
```
$ rviz2 -d autoware.rviz
```
- _Terminal 2_:
```
$ rviz2 -d autoware_voxel.rviz
```

Now we need to `ssh` into the Hikey970 in **4** terminals and then we need to do the following:

2. In _Terminal 1_:
```
$ docker run -it --rm --privileged --net=host -u linaro -v ~/shared_dir:/home/linaro/shared_dir:rw 96boards/autoware:auto /bin/bash
$ cd ~
$ source AutowareAuto/install/setup.bash
```

3. In terminals 2 to 4 we need to access the running container as we did [here](https://www.96boards.org/blog/autoware.ai_hikey970/#in-hikey970) but using the `linaro` user:
```
$ docker exec -it -u linaro CONTAINER_NAME /bin/bash
$ cd ~
$ source AutowareAuto/install/setup.bash
```

4. _Terminal 1_:
```
$ udpreplay ~/shared_dir/route_small_loop_rw-127.0.0.1.pcap
```

5. _Terminal 2_:
```
$ ros2 run velodyne_node velodyne_cloud_node_exe __params:=/home/"${USER}"/AutowareAuto/src/drivers/velodyne_node/param/vlp16_test.param.yaml
```

6. _Terminal 3_:
```
$ ros2 run ray_ground_classifier_nodes ray_ground_classifier_cloud_node_exe __params:=/home/"${USER}"/AutowareAuto/src/perception/filters/ray_ground_classifier_nodes/param/vlp16_lexus.param.yaml
```

7. _Terminal 4_:
```
$ ros2 run voxel_grid_nodes voxel_grid_cloud_node_exe __params:=/home/"${USER}"/AutowareAuto/src/perception/filters/voxel_grid_nodes/param/vlp16_lexus_centroid.param.yaml
```

If everything went fine we will be able to visualize the demo point cloud and downsampled one in the running `rviz2` GUIs as can be seen in the image below.


### .AI and .Auto bridge

***

# Conclusion

In this blog post we have explored how to run the sensing and localization components of Autoware.AI on the Hikey970. This shows that it is possible to use affordable hardware for development purposes of certain components of Autoware and sets the basis for how to run it headless as opposed to using the GUI. In addition we can also try with another board for the other components that we currently run in the laptop, which is something we will show in other blog post in the near future.

Next time, we will give a go at Autoware.Auto on the Hikey970 and we will follow the [Autoware.Auto 3D Perception Stack demo](https://autowarefoundation.gitlab.io/autoware.auto/AutowareAuto/perception-stack.html), so keep an eye to this space.
